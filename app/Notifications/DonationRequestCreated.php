<?php

namespace App\Notifications;

use Illuminate\Bus\Queueable;
use Illuminate\Contracts\Queue\ShouldQueue;
use Illuminate\Notifications\Messages\MailMessage;
use Illuminate\Notifications\Notification;
use NotificationChannels\Fcm\FcmChannel;
use NotificationChannels\Fcm\FcmMessage;
use NotificationChannels\Fcm\Resources\Notification as FcmNotification;


class DonationRequestCreated extends Notification
{
  use Queueable;

  public $notification;

  /**
   * Create a new notification instance.
   */
  public function __construct($notification)
  {
    $this->notification = $notification;
  }

  public function via($notifiable)
  {
    return [FcmChannel::class];
  }

  public function toFcm($notifiable): FcmMessage
  {
    return (new FcmMessage(notification: new FcmNotification(
      title: $this->notification->title,
      body: $this->notification->message,
      // image: 'http://example.com/url-to-image-here.png'
    )))
      ->data(['data1' => 'value', 'data2' => 'value2'])
      ->custom([
        'android' => [
          'notification' => [
            'color' => '#0A0A0A',
          ],
          'fcm_options' => [
            'analytics_label' => 'analytics',
          ],
        ],
        'apns' => [
          'fcm_options' => [
            'analytics_label' => 'analytics',
          ],
        ],
      ]);
  }
}
